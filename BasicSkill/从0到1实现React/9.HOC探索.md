### HOC 组件实践

高阶组件(Higher Order Component) 不属于 React API 范畴，但是它在 React 中也是一种实用的技术。这个小节算是番外篇，会结合前文实现的 cpreact 进行与 HOC 相关的实践。

它可以用如下公式表示：

```js
y = f(x),

// x：原有组件
// y：高阶组件
// f()：
```

`f()` 的实现有两种方法，下面进行实践。

#### Property Proxy

这类实现也是装饰器模式的一种运用，通过装饰器函数给原来函数赋能。下面例子在装饰器函数中给被装饰的组件传递了额外的属性 { a: 1, b: 2 }。

```js
function ppDecorate(WrappedComponent) {
  return class extends Component {

    render() {
      const obj = { a: 1, b: 2 }
      return (
        <WrappedComponent { ...this.props } { ...obj } />
      )
    }
  }
}

@ppDecorate
class B extends Component {
  render() {
    return (
      <div>
        { this.props.a + this.props.b } { /* 输出 3 */ }
      </div>
    )
  }
}
```

要是将 { a: 1, b: 2 } 替换成全局共享对象，那么不就是 react-redux 中的 Connect 了么?

再举个例子，我们要在 React 中实现类似 Vue 的双向绑定的效果也可以借助这种方法。下面我们来探索如何实现。

#### 继承反转

### 相关文章

* [带着三个问题深入浅出React高阶组件](https://juejin.im/post/59818a485188255694568ff2)
* [深入理解 React 高阶组件](https://zhuanlan.zhihu.com/p/24776678?refer=FrontendMagazine)