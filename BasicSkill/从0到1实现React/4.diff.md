### diff 的实现

改造之前实现的方法 vdomToDom，

策略：我们只进行同层级的节点比较，一旦定位到层级不同的节点，则返回该节点之后的 dom

```js
/**
 * render 函数中抽离出 vdomToDom, 从而能在 setState 函数中复用
 * @param {*} vdom vdom
 * @return dom
 */
function vdomToDom(vdom) {
  if (_.isFunction(vdom.nodeName)) { // 为了更加方便地书写生命周期逻辑，将自定义组件逻辑和一般 html 标签的逻辑分离开
    const component = createComponent(vdom)
    setProps(component)
    renderComponent(component)
    return component.base
  }
  if (_.isString(vdom) || _.isNumber(vdom)) {
    const textNode = document.createTextNode(vdom)
    return textNode // 待测验 <div>I'm {this.props.name}</div>
  }
  const dom = document.createElement(vdom.nodeName)
  for (const attr in vdom.attributes) {
    setAttribute(dom, attr, vdom.attributes[attr])
  }
  vdom.children.forEach(vdomChild => render(vdomChild, dom))
  return dom
}
```

将其重命名为 diff，

难点：新老虚拟 dom 比较后其差异的地方如何转化到真实节点上？

### text 差异

### component 差异

### element 差异